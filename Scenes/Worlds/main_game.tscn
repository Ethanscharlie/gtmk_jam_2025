[gd_scene load_steps=19 format=3 uid="uid://2pjs0jp882b8"]

[ext_resource type="PackedScene" uid="uid://5ol0c5vewmjh" path="res://Scenes/Entities/player.tscn" id="1_by2n7"]
[ext_resource type="Script" uid="uid://c82xwtn6ho2gs" path="res://Scenes/Worlds/main_game.gd" id="1_p5lif"]
[ext_resource type="Texture2D" uid="uid://0lh2cq2o6f2f" path="res://Images/pixel_art_small.png" id="1_r1lv4"]
[ext_resource type="PackedScene" uid="uid://civrfmnwqnw2l" path="res://Scenes/Entities/enemy_spawner.tscn" id="2_r1lv4"]
[ext_resource type="Script" uid="uid://dca0utk7di8kb" path="res://Scripts/score_keeper.gd" id="3_p5lif"]
[ext_resource type="FontFile" uid="uid://b64wowbafxnxd" path="res://Fonts/prstart.ttf" id="4_3bwat"]
[ext_resource type="Script" uid="uid://056wkbfyig7k" path="res://Scripts/score_label_updater.gd" id="5_wlse2"]
[ext_resource type="Texture2D" uid="uid://d07eapao22uf3" path="res://Images/pixilart-drawing.png" id="8_3bwat"]
[ext_resource type="Script" uid="uid://cieliajh3ub6u" path="res://Scripts/wave_label_updater.gd" id="9_wlse2"]
[ext_resource type="AudioStream" uid="uid://dgtbfsb8l0wwo" path="res://Audio/Music/Acid Track Full.mp3" id="10_25d1b"]
[ext_resource type="AudioStream" uid="uid://bw88pbtnmerb7" path="res://Audio/SFX/Wave Clear.mp3" id="11_u57tp"]
[ext_resource type="AudioStream" uid="uid://cedw0yaev4c0o" path="res://Audio/SFX/Next Wave.mp3" id="12_fx50d"]
[ext_resource type="AudioStream" uid="uid://svlng7a77jit" path="res://Audio/SFX/Next Wave 2.mp3" id="13_k0u7c"]
[ext_resource type="AudioStream" uid="uid://ccmrw8vbabdg" path="res://Audio/SFX/Next Wave 3.mp3" id="14_b0iry"]
[ext_resource type="AudioStream" uid="uid://dor28up4y0qly" path="res://Audio/SFX/Next Wave 4.mp3" id="15_fhbx6"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_yatjs"]
vertices = PackedVector2Array(1910, 1070, 10, 1070, 10, 10, 1910, 10)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(0, 0, 1920, 0, 1920, 1080, 0, 1080)])

[sub_resource type="Theme" id="Theme_cmw6u"]
default_font = ExtResource("4_3bwat")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_gyofy"]
streams_count = 4
stream_0/stream = ExtResource("12_fx50d")
stream_1/stream = ExtResource("13_k0u7c")
stream_2/stream = ExtResource("14_b0iry")
stream_3/stream = ExtResource("15_fhbx6")

[node name="EnemyDemo" type="Node2D"]
script = ExtResource("1_p5lif")

[node name="background" type="Sprite2D" parent="."]
modulate = Color(0, 0.314, 0.314, 1)
texture_filter = 1
position = Vector2(960, 540)
scale = Vector2(3, 3)
texture = ExtResource("1_r1lv4")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
navigation_polygon = SubResource("NavigationPolygon_yatjs")

[node name="Enemy_restrictor" type="StaticBody2D" parent="NavigationRegion2D"]
collision_layer = 0
collision_mask = 0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="NavigationRegion2D/Enemy_restrictor"]
polygon = PackedVector2Array(234, 174, 345, 138, 462, 120, 939, 120, 942, 120, 1425, 120, 1542, 129, 1659, 159, 1746, 234, 1782, 348, 1800, 462, 1806, 582, 1806, 585, 1794, 702, 1764, 816, 1686, 906, 1578, 945, 1464, 960, 942, 975, 939, 975, 495, 966, 384, 954, 276, 930, 177, 849, 144, 732, 123, 615, 117, 498, 117, 495, 129, 378, 156, 261)

[node name="ChaseNavigationRegion2D" type="NavigationRegion2D" parent="."]
navigation_polygon = SubResource("NavigationPolygon_yatjs")

[node name="Player" parent="." instance=ExtResource("1_by2n7")]
position = Vector2(960, 528)

[node name="game_manager" type="Node2D" parent="."]

[node name="EnemySpawner" parent="game_manager" instance=ExtResource("2_r1lv4")]

[node name="Scorekeeper" type="Node2D" parent="game_manager"]
script = ExtResource("3_p5lif")

[node name="ScoreLabel" type="Label" parent="."]
z_index = 1
texture_filter = 1
offset_left = 1458.0
offset_top = 990.0
offset_right = 1938.0
offset_bottom = 1032.0
theme = SubResource("Theme_cmw6u")
theme_override_colors/font_color = Color(0.0528295, 0.107894, 0.386475, 1)
theme_override_colors/font_shadow_color = Color(0.0198773, 0.0522471, 0.235565, 1)
theme_override_font_sizes/font_size = 40
text = "PTS: 10000"
horizontal_alignment = 1
vertical_alignment = 1
script = ExtResource("5_wlse2")

[node name="Sprite2D" type="Sprite2D" parent="ScoreLabel"]
z_index = -1
position = Vector2(192, 12)
scale = Vector2(3, 3)
texture = ExtResource("8_3bwat")

[node name="WaveLabel" type="Label" parent="."]
z_index = 1
texture_filter = 1
offset_left = 1581.0
offset_top = 867.0
offset_right = 1941.0
offset_bottom = 909.0
theme = SubResource("Theme_cmw6u")
theme_override_colors/font_color = Color(0.0528295, 0.107894, 0.386475, 1)
theme_override_colors/font_shadow_color = Color(0.0198773, 0.0522471, 0.235565, 1)
theme_override_font_sizes/font_size = 40
text = "WAVE: 0"
horizontal_alignment = 1
vertical_alignment = 1
script = ExtResource("9_wlse2")

[node name="Sprite2D" type="Sprite2D" parent="WaveLabel"]
z_index = -1
position = Vector2(192, 12)
scale = Vector2(3, 3)
texture = ExtResource("8_3bwat")

[node name="music_bgm" type="AudioStreamPlayer" parent="."]
stream = ExtResource("10_25d1b")
volume_db = -3.0
autoplay = true
bus = &"Music"
parameters/looping = true

[node name="sfx_waveclear" type="AudioStreamPlayer" parent="."]
stream = ExtResource("11_u57tp")
volume_db = -15.0
bus = &"Player SFX"

[node name="sfx_waveincoming" type="AudioStreamPlayer" parent="."]
stream = SubResource("AudioStreamRandomizer_gyofy")
volume_db = -7.0
bus = &"Player SFX"

[connection signal="reset_wave" from="Player" to="game_manager/EnemySpawner" method="_on_player_reset_wave"]
[connection signal="reset_wave" from="Player" to="game_manager/Scorekeeper" method="_on_player_reset_wave"]
[connection signal="enemy_spawned" from="game_manager/EnemySpawner" to="game_manager/Scorekeeper" method="_on_enemy_spawner_enemy_spawned"]
[connection signal="new_wave" from="game_manager/EnemySpawner" to="WaveLabel" method="_on_enemy_spawner_new_wave"]
[connection signal="enemy_killed" from="game_manager/Scorekeeper" to="game_manager/Scorekeeper" method="_on_enemy_killed"]
[connection signal="score_updated" from="game_manager/Scorekeeper" to="ScoreLabel" method="_on_scorekeeper_score_updated"]
